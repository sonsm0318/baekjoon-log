# 🟢 복습 불필요

## 📌 문제 이름: 사탕 상자 (백준 2243)

### 🧠 핵심 개념
- 1부터 1,000,000번까지 사탕 번호 존재
- `2 a b`: a번 사탕을 b개 추가/제거  
- `1 k`: 가장 맛있는 사탕부터 누적합 기준 `k`번째 사탕 꺼내고 개수 -1

---

## ✅ 사용한 알고리즘: 세그먼트 트리 (구간 합)

### 세그트리의 저장 정보
- `count`: 해당 구간의 사탕 총 개수
- 노드마다 왼쪽/오른쪽 자식의 `count`를 합쳐서 부모 갱신

### 핵심 구현 포인트

#### 1. update
- 특정 사탕 번호의 개수를 증감
- 리프 노드부터 올라오면서 `count` 갱신

#### 2. query
- 전체 사탕 중 `k`번째를 찾기 위해  
  **오른쪽부터 탐색** (번호가 클수록 맛있음)
- 자식 노드 선택 후 반드시 **부모 노드도 다시 갱신해야 함**

---

## 💥 주의 사항
- `query()` 함수에서 **사탕을 꺼낸 후 해당 노드 뿐만 아니라 부모 노드까지 `count`를 재계산해야 함**
- 탐색 방향은 **무조건 오른쪽부터** (`tree[idx << 1 | 1]`)  
  → 번호가 클수록 맛있는 사탕이기 때문

---

## ✅ 요약
- 세그트리를 활용한 K번째 원소 찾기 문제
- 핵심은 누적 개수를 기준으로 오른쪽부터 이분 탐색
- 쿼리 후에도 부모 노드 상태를 반드시 갱신해야 한다
