# 📘 Segment Tree - 구간 Min/Max 추적기

## 🎯 목적

세그트리를 활용해 주어진 배열에서 구간 [L, R]에 대한 **최솟값과 최댓값을 동시에 추적**하는 구조를 구현함.

---

## ✅ 핵심 기능

- `build()`:
  - 입력 배열 기반으로 트리 초기화
  - 각 노드에 `min`, `max` 값을 함께 저장

- `query()`:
  - 주어진 구간 [L, R]에 대해 `min`, `max` 값을 반환
  - 전형적인 재귀 기반 구간 쿼리 방식 사용
  - `INT_MAX`, `INT_MIN`을 통한 **base case 설정** 포함

---

## 🧠 구현 중 사고 흐름 요약

### 1. 왜 min/max를 구조체로 묶었는가?
- 두 값을 동시에 반환하기 위해 `MinMax` 구조체를 사용
- `query()`에서도 쿼리 결과 병합이 간결해짐

### 2. base case 없이 구현 시도?
- 처음엔 “어차피 mid로 나누는데 필요 없지 않나?” 생각했음
- 하지만 `양쪽 자식 모두 겹치지 않는 경우`를 빠르게 제외하려면 필수
- **오히려 base case를 제거하면 코드가 더 복잡해진다**는 걸 스스로 깨달음

### 3. `query()`에서 잘못된 조건 (`l >= start && r <= end`) 실수
- 올바른 조건은 **"노드 범위가 쿼리 범위에 포함될 때"**
- 수정 후 정확한 범위 추적이 가능해짐

---

## 🧪 한 줄 정리

> 세그트리에서 다중 값(min/max) 쿼리는 구조체와 base case 분기를 통해 정확하고 안정적으로 구현 가능하며, base case 제거는 가능한 시도지만 오히려 불필요한 복잡도를 유발할 수 있다.

---

## 📌 실수 기록

| 항목 | 내용 |
|------|------|
| 조건 실수 | `l >= start && r <= end` → `l <= start && end <= r` |
| base case 미처리 | `r < start || end < l` 누락 시 버그 발생 가능 |
| 오타 | `qeury()` → `query()` |

---

## 📎 참고 코드 요약

```cpp
if (r < start || end < l) return {INT_MAX, INT_MIN};
if (l <= start && end <= r) return tree[idx];
